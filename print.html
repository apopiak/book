<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Encointer Book</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="introduction.html">Introduction</a></li><li class="expanded "><a href="economics.html"><strong aria-hidden="true">1.</strong> Economics</a></li><li><ol class="section"><li class="expanded "><a href="economics-cantillon.html"><strong aria-hidden="true">1.1.</strong> The Cantillon Effect</a></li><li class="expanded "><a href="economics-ubi.html"><strong aria-hidden="true">1.2.</strong> Universal Basic Income</a></li><li class="expanded "><a href="economics-demurrage.html"><strong aria-hidden="true">1.3.</strong> Demurrage</a></li><li class="expanded "><a href="economics-local-currencies.html"><strong aria-hidden="true">1.4.</strong> Local Currencies</a></li></ol></li><li class="expanded "><a href="protocol.html"><strong aria-hidden="true">2.</strong> The Encointer Protocol</a></li><li><ol class="section"><li class="expanded "><a href="protocol-threat-model.html"><strong aria-hidden="true">2.1.</strong> Threat Model</a></li></ol></li><li class="expanded "><a href="decentralization.html"><strong aria-hidden="true">3.</strong> Decentralization</a></li><li class="expanded "><a href="testnets.html"><strong aria-hidden="true">4.</strong> Testnets</a></li><li><ol class="section"><li class="expanded "><a href="testnet-gesell.html"><strong aria-hidden="true">4.1.</strong> Gesell</a></li><li><ol class="section"><li class="expanded "><a href="testnet-gesell-tutorial.html"><strong aria-hidden="true">4.1.1.</strong> Tutorial</a></li></ol></li><li class="expanded "><a href="testnet-cantillon.html"><strong aria-hidden="true">4.2.</strong> Cantillon</a></li><li><ol class="section"><li class="expanded "><a href="testnet-cantillon-tutorial.html"><strong aria-hidden="true">4.2.1.</strong> Tutorial</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">The Encointer Book</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><img src="./fig/encointer_logo_orig.svg" alt="logo" /></p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>This is becoming the main documentation resource for Encointer. It is work in progress.</p>
<p>For now, please refer to the <a href="https://github.com/encointer/whitepaper/raw/master/encointer_whitepaper.pdf">whitepaper</a></p>
<h1><a class="header" href="#economics" id="economics">Economics</a></h1>
<p>This chapter shall be an opinionated interpretation of the status quo and what we expect to acheive with Encointer.</p>
<h1><a class="header" href="#the-cantillon-effect" id="the-cantillon-effect">The Cantillon Effect</a></h1>
<p>Richard Cantillon is known for his analysis on the effects of a change in money supply in a state on inequality. Around the year 1730 he wrote in his <em>Essay sur la nature du commerce en général</em>:</p>
<blockquote>
<p>If the increase in actual money comes from the state's gold and silver mines, the mines' owner,  the entrepreneurs, the smelters, the refiners and generally all those who work in them will increase their expenditure in line with their gains. At home they will consume more meat and wine or beer than they used to, and they will become accustomed to having better clothes, finer linen, and more ornate houses and other sought-after commodities. Consequently they will give employment to some craftsmen who hitherto had not as much work and who, for the same reason will increase their expenditure. All if this increased expenditure on meat, wine, wool, and the like will necessarily reduce the share of other people  in the state who are not the initial beneficiaries from the wealth  of the mines in question. The bargaining in the market, with the demand for meat, wine, wool and the like being stronger than usual, will not fail to increase their prices.</p>
</blockquote>
<p>Nowadays, money supply isn't affected by mining gold and silver. It's the banks that issue money as credit - out of nothing. Translating Cantillon into our time, we should replace <em>miner</em> by <em>banker</em>. The rest of the story still applies. However, in spite of quantitative easing we don't see much price inflation for essential goods. This effect can be explained by observing that all this newly issued money never reaches the masses. </p>
<p>Encointer aims at inverting the <em>Cantillon Effect</em>. Instead of issuing money <em>at the top</em>, as credit to businesses and creditworthy individuals, we issue money <em>at the bottom</em>. Every individual gets a universal basic income: freshly issued money.</p>
<h1><a class="header" href="#universal-basic-income" id="universal-basic-income">Universal Basic Income</a></h1>
<p>A universal basic income (UBI) is a modest amount of money paid unconditionally to individuals on a regular basis (<a href="https://www.penguin.co.uk/books/304/304706/basic-income/9780141985480.html">Standing</a>). Most advocates of UBI aim at introducing it at a national level, as a monthly income to all legal (fiscal) residents and paid out in cash (denominated in national currency). Usually, a UBI is suggested to be financed by some form of taxation. As <a href="https://www.hup.harvard.edu/catalog.php?isbn=9780674052284">Van Parijs &amp; Vanderborght</a> explain, a national UBI may lead to justice among thieves (achieving more equality within a wealthy nation while there’s staggering inequality globally). They therefore argue for a global UBI, as do <a href="http://www.worldbasicincome.org.uk/">WBI</a> or <a href="http://www.globalincome.org/">GBI</a>.</p>
<p>Encointer aims at providing a global UBI in terms of units of cryptocurrency created on a regular basis and distributed to individuals (almost) unconditionally. Let’s examine the characteristics of such an encointer-UBI:</p>
<h2><a class="header" href="#universal" id="universal">universal</a></h2>
<p>Encointer is paid out to every human being able and willing to attend encointer meetus every 41 days and in posession of a smartphone. This unfortunately excludes persons with certain disabilities as well as those without a smartphone. Also, the need to travel to meetups comes at varying cost, depending on local population densities – a disadvantage to people living in remote areas. While this is not exactly unconditional, we think it is less exclusive on a global scale than introducing national UBI schemes in few wealthy nations. Moreover, encointer might promote the concept of UBI and pave the way for institutionalized national or global UBI.</p>
<h2><a class="header" href="#basic" id="basic">basic</a></h2>
<p>Nothing in the definition of UBI defines a specific amount. However, it is often understood to be sufficient to cover basic needs and therefore provide economic security to its beneficiaries. In order to do so, it should also be stable. Encointer is a new cryptocurrency with algorithmically defined monetary supply. Only the (global) market can define its purchasing power.
global vs local currency</p>
<p>Cryptocurrencies based on public unpermissioned blockchains are global by nature. Encointer is such a cryptocurrency – with the important added feature of allowing local currencies to be issued, as will be discussed below. Encointer is paid out in equal nominal amounts to every individual. Technically, there is no decentralized way of doing otherwise as the P2P network has no awareness of national borders or the cost of living. As a means for UBI this is a mixed blessing. If UBI is expected to be suffient to cover basic needs there is no way to achieve this goal with a global currency. Purchasing power of one unit of global currency would vary hugely among different regions. The upside being that the UBI’s purchasing power is in that case expected to be higher in weaker economies, therefore reducing global inequality.</p>
<p>Because Encointer issuance involves meetups with known geolocation, it is technically feasible to issue local currencies which are algorithmically bound to high-interaction communities (though ignorant of national borders). This would allow the UBI to be denominated in a currency which is meant to be used within local ecosystems yet freely tradable globally.
real value</p>
<p>The purchasing power of a unit of local encointer currency is market-based. It isn’t backed by gold or trust in some nations central bank. It’s value is determined by its usefulness as a store of value, medium of transfer or unit of account. Depending on national circumstances, the usefulness of encointer can vary. Where large parts of the populations are unbanked, encointer could complement national currency because it is accessible to everyone and more convenient to use and store than cash.</p>
<p>Another angle from which to define value could be international development aid. Encointer would allow to distribute aid to individuals living in a specified area directly by buying their local currency. It would even be possible to buy such local currency at fixed rates, thereby ensuring a stable value of that local currency. Administrative cost and misappropriation of development aid could be reduced significantly.</p>
<h2><a class="header" href="#income" id="income">income</a></h2>
<p>Encointer delivers an income in a fixed nominal amount of digital currency, paid (or issued) in regular intervals (for every ceremony meetup attended, happening in fixed intervals of 41 days) to all participating individuals. This income is obligation free and is given to the rich and the poor alike.</p>
<p>This income is paid for by issuing money and therefore by nominal inflation of encointer currency. The absolute nominal inflation rate depends on the number of ceremony meetup participants. And there is a correcting factor: Demurrage!</p>
<h2><a class="header" href="#literature" id="literature">Literature</a></h2>
<ul>
<li><a href="https://www.penguin.co.uk/books/304/304706/basic-income/9780141985480.html">Guy Standing, Basic Income: And How We Can Make It Happen</a></li>
<li><a href="https://www.hup.harvard.edu/catalog.php?isbn=9780674052284">Van Parijs &amp; Vanderborght, Basic Income – A Radical Proposal for a Free Society and a Sane Economy</a></li>
</ul>
<h1><a class="header" href="#demurrage" id="demurrage">Demurrage</a></h1>
<p>Encointer currencies feature <a href="https://en.wikipedia.org/wiki/Demurrage_(currency)">nominal demurrage</a>: All balances get devalued over time. The funds you’re holding lose 7% of their nominal value every month. Think of this devaluation like a payment to a solidarity fund that pays for the UBI. This way, Encointer can issue monthly UBI and still maintain stable money supply as shown by the simulation in the figure below. Another advantage of demurrage has been described by <a href="https://en.wikipedia.org/wiki/Silvio_Gesell">Silvio Gesell</a> when he proposed <a href="https://en.wikipedia.org/wiki/Freigeld">Freigeld</a> in 1916: Demurrage increases money velocity, which in turn fuels the local economy.</p>
<p><img src="./fig/ubi-vs-demurrage-balance.svg" alt="demurrage" /></p>
<p><em>Money supply for a stationary economy with a demurrage fee of 7% per month and a population of 10’000 participants. After an initial phase, the UBI of 1 token per ceremony maintains a constant ratio to the total money supply and therefore maintains a constant real value.</em></p>
<h1><a class="header" href="#local-currencies" id="local-currencies">Local Currencies</a></h1>
<p>Cryptocurrencies are fundamentally global in nature. Their networks are decentralized and don't care for national borders. But global currencies have a severe disadvantage: Their purchase value can evolve very differently in different regions. The Euro is such an example that is the official currency in many european countires with distinct fiscal policies and economic development. While there are political reasons to favor such a unifying currency, many economists doubt the concept. States with less economic growth have no option of devaluing their national currency. They can only get into debt - and then get forced into austerity, further weakening their economy.</p>
<p>Local currencies on the other hand are mainly affected by local economy. </p>
<h2><a class="header" href="#real-examples" id="real-examples">Real Examples</a></h2>
<h3><a class="header" href="#wära-schwanenkirchen" id="wära-schwanenkirchen">Wära Schwanenkirchen</a></h3>
<p><em>TODO</em></p>
<h3><a class="header" href="#ab-schein-wörgl" id="ab-schein-wörgl">AB-Schein Wörgl</a></h3>
<p>During the great depression, the austrian village of Wörgl attempted a monetary experiment to fight deflation: A complementary local currency.</p>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">Schilling (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by the muncipality, as partial salary for infrastructure  work</td></tr>
<tr><td align="left">backing</td><td align="left">full reserve in Schilling</td></tr>
<tr><td align="left">demurrage</td><td align="left">12% / year linear pro rata</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">2%</td></tr>
<tr><td align="left">date</td><td align="left">1932 until prohibited in 1933</td></tr>
</tbody></table>
<p>Observed Impact:</p>
<ul>
<li>lower unemployment (-16% while elsewhere +19% in 1933)</li>
<li>8-10x money velocity</li>
<li>improved infrastructure: bridge, ski-jump, streets</li>
</ul>
<p><a href="http://userpage.fu-berlin.de/%7Eroehrigw/schmitt/text6.htm">source</a></p>
<h3><a class="header" href="#chiemgauer" id="chiemgauer">Chiemgauer</a></h3>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">Euro (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by Chiemgau association, in exchange for Euro</td></tr>
<tr><td align="left">backing</td><td align="left">full reserve in Euro</td></tr>
<tr><td align="left">demurrage</td><td align="left">8% / year linear pro rata</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">5% (of which 3% go to local associations chosen by buyers of Chiemgauer)</td></tr>
<tr><td align="left">date</td><td align="left">2003 until now</td></tr>
</tbody></table>
<h3><a class="header" href="#wir" id="wir">WIR</a></h3>
<p>WIR is rather a reciprocal exchange network (barter ring) - but it is an official currency (CHW). It is only open to businesses, not private persons.</p>
<table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody>
<tr><td align="left">denomination</td><td align="left">CHF (1:1 national currency)</td></tr>
<tr><td align="left">issuance</td><td align="left">by WIR bank as credit (with low interest rate)</td></tr>
<tr><td align="left">backing</td><td align="left">mixed-asset backed</td></tr>
<tr><td align="left">demurrage</td><td align="left">none</td></tr>
<tr><td align="left">reimbursement fee</td><td align="left">reimbursement prohibited, you have to spend it</td></tr>
<tr><td align="left">date</td><td align="left">1934 until now</td></tr>
</tbody></table>
<p><a href="https://archive.is/20130115184645/http://www.der-arbeitsmarkt.ch/arbeitsmarkt/de/themen/archiv/101176/WIR_sind_auch_Geld">source</a></p>
<h2><a class="header" href="#tbc" id="tbc">TBC....</a></h2>
<!-- ..TBC...medieval times...digitization eases exchange -->
<h1><a class="header" href="#encointer-protocol" id="encointer-protocol">Encointer Protocol</a></h1>
<p>The <em>Encointer protocol</em> is what ensures that</p>
<ul>
<li>only humans get a UBI</li>
<li>every human can only get it once</li>
</ul>
<p>We call the result of this protocol a <em>unique proof of personhood</em>.</p>
<p>Encointer leverages the fact that every person can only be in one place at one time. Every 41 days, participants are requested to attend physical key-signing meetups with small groups of random people. Because all meetups happen as one global ceremony all on the same day at the same local time, no one can attend two meetups.</p>
<p>The formal definition of the protocol can be found in our <a href="https://github.com/encointer/whitepaper/raw/master/encointer_whitepaper.pdf">whitepaper</a></p>
<h1><a class="header" href="#threat-model" id="threat-model">Threat Model</a></h1>
<h2><a class="header" href="#actor-profiles" id="actor-profiles">Actor Profiles</a></h2>
<p>We categorize users into the following psychological profiles for later scenario analysis:</p>
<h3><a class="header" href="#honest-img-srcfigemoji_innocent_1f607svg-width64" id="honest-img-srcfigemoji_innocent_1f607svg-width64">Honest <img src=./fig/emoji_innocent_1F607.svg width=64></a></h3>
<p>Will comply with the rules</p>
<h3><a class="header" href="#greedy-img-srcfigemoji_devil_1f47fsvg-width64" id="greedy-img-srcfigemoji_devil_1f47fsvg-width64">Greedy <img src=./fig/emoji_devil_1F47F.svg width=64></a></h3>
<p>Will try to cheat the system for his/her own benefit. Will collude with others</p>
<p>Strategies:</p>
<ul>
<li>Get reward without showing up</li>
<li>Sign sybil id's to collect more rewards</li>
</ul>
<h3><a class="header" href="#saboteur-img-srcfigemoji_angry_1f621svg-width64" id="saboteur-img-srcfigemoji_angry_1f621svg-width64">Saboteur <img src=./fig/emoji_angry_1F621.svg width=64></a></h3>
<p>Will try to hurt the system, even if this comes at a cost. Will collude with others</p>
<p>Strategies:</p>
<ul>
<li>turn meetups invalid</li>
<li>demoralize other participants by preventing them to get reward</li>
</ul>
<h2><a class="header" href="#more-roles" id="more-roles">More Roles</a></h2>
<h3><a class="header" href="#sybil-img-srcfigemoji_alien_1f47dsvg-width64" id="sybil-img-srcfigemoji_alien_1f47dsvg-width64">Sybil <img src=./fig/emoji_alien_1F47D.svg width=64></a></h3>
<p>An identity that has no bijectively exclusive relationship with a participant. It can however have a bijectively exclusive relationship with a person who doesn't attend any meetup.</p>
<h3><a class="header" href="#manipulable-img-srcfigemoji_hearts_1f970svg-width64" id="manipulable-img-srcfigemoji_hearts_1f970svg-width64">Manipulable <img src=./fig/emoji_hearts_1F970.svg width=64></a></h3>
<p>An honest person that can be convinced to break the rules by social pressure. Will not strive for economic benefit.</p>
<h2><a class="header" href="#collusion-organizations" id="collusion-organizations">Collusion Organizations</a></h2>
<h3><a class="header" href="#evilcorp" id="evilcorp">evil.corp</a></h3>
<p>An organization of the greedy or saboteur participants. </p>
<p>Strategies: </p>
<ul>
<li>undermining randomization by sharing information and key pairs to allow collusion attacks at meetups</li>
</ul>
<h1><a class="header" href="#assumptions" id="assumptions">Assumptions</a></h1>
<p>We assume </p>
<ol>
<li>The majority of ceremony participants with reputation sending their signed claims to the blockchain location is honest.</li>
</ol>
<p><em>Reputation</em> here means having attended at least one of the last two ceremonies and having been rewarded.</p>
<h1><a class="header" href="#rule-design" id="rule-design">Rule Design</a></h1>
<p>When designing rules there's a tradeoff beween preventing either the greedy or the saboteur's success. We can introduce very restrictive rules that will successfully prevent sybil attacks by the greedy, but these will make it very easy for the saboteur to demoralize participants by turning meetups invalid deliberately.</p>
<h2><a class="header" href="#rules" id="rules">Rules</a></h2>
<p>TODO: This is work in progress....</p>
<h3><a class="header" href="#meetup-assignment" id="meetup-assignment">Meetup Assignment</a></h3>
<ol>
<li>A meetup has at least <font color="green">3</font> assigned participants</li>
<li>A meetup has at most <font color="green">12</font> assigned participants</li>
<li>Only <font color="green">1/4</font> of assigned participants may have zero reputation (be newcomers)
<ul>
<li><em>this rule directly impacts the maximum adoption rate. A population of 1M will take at least</em> log(1M/12)/log(4/3) &lt;= 40 ceremonies </li>
</ul>
</li>
</ol>
<h3><a class="header" href="#meetup-validation" id="meetup-validation">Meetup validation</a></h3>
<ol>
<li>(NEEDED?) The signature <a href="https://en.wikipedia.org/wiki/Reciprocity_(network_science)">reciprocity</a> is at least <font color="green">X</font></li>
<li>(NEEDED?) The reciprocal edge connectedness is at least M-2, where M is the number of participants with at least one signature by another party.</li>
<li>(OK) At least <font color="green">two</font> participants signed each other mutually</li>
<li>(OK) Disqualify a participant if her vote is not equal to the number of participants signed by her.</li>
</ol>
<h3><a class="header" href="#ubireward-issuance" id="ubireward-issuance">UBI/Reward Issuance</a></h3>
<p>In order to receive a UBI, a participant </p>
<ol>
<li>(OK) must be registered and assigned to the meetup</li>
<li>(OK) the meetup must be valid</li>
<li>(TODO: ARGUE THRESHOLD) must have her claim signed by at least <font color="green">1/3</font> of registered participants</li>
<li>(OK) must have signed the participants that are necessary to fulfill rule above in return</li>
</ol>
<h1><a class="header" href="#remote-attacks" id="remote-attacks">Remote Attacks</a></h1>
<h2><a class="header" href="#flooding-attack" id="flooding-attack">Flooding Attack</a></h2>
<p>An adversary could register large numbers of fake participants who will never show up. This could prevent legit persons to participate.</p>
<p>Mitigation: </p>
<ul>
<li>Limit the number of assigned participants with no reputation</li>
</ul>
<h1><a class="header" href="#non-protocol-threats" id="non-protocol-threats">Non-Protocol Threats</a></h1>
<h2><a class="header" href="#aggression-detention" id="aggression-detention">Aggression, Detention</a></h2>
<p>If meetup locations are publicly known, participants could face aggression from saboteurs or they could be detained if participation is suddenly judged illegal.</p>
<p>Mitigation: </p>
<ul>
<li>The set of possible meetup locations has to be significantly larger than the need in order to host all participants.</li>
</ul>
<h2><a class="header" href="#abduction" id="abduction">Abduction</a></h2>
<p>If celebrity meetup participants can be linked to their names and meetup locations in advance, they might get kidnapped</p>
<p>Mitigation: </p>
<ul>
<li>Make sure meetup assignments are kept confidential at least until the meetup has passed.</li>
</ul>
<h1><a class="header" href="#behavioural-meetup-scenario-analysis" id="behavioural-meetup-scenario-analysis">Behavioural Meetup Scenario Analysis</a></h1>
<p>The scenario analysis is structured by the number of participants who were assigned to a meetup</p>
<h2><a class="header" href="#3-registered-participants" id="3-registered-participants">3 Registered Participants</a></h2>
<h3><a class="header" href="#happy-flow" id="happy-flow">Happy Flow</a></h3>
<p>All participants only sign for persons present at meetup location. </p>
<p><img src="./fig/meetup_3r_3i.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>Noshow of one is treated with mercy for attendees</p>
<p><img src="./fig/meetup_3r_2i1s_1noshow.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 1
</code></pre>
<h3><a class="header" href="#attacks" id="attacks">Attacks</a></h3>
<h4><a class="header" href="#social-engineering" id="social-engineering">Social Engineering</a></h4>
<p>Adversary B talks A into signing his sybil ID</p>
<p><img src="./fig/meetup_3r_1m1d1a.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>As there is no honest participant in this meetup, this attack is out of scope of our threat model.</p>
<p>Mitigation</p>
<ul>
<li>randomized meetups should reduce the chance that someone could be assigned with his sybil to the same meetup. In weakly populated areas, this can happen easily though</li>
</ul>
<p><em>this scenario violates threat model assumptions</em></p>
<h4><a class="header" href="#exclusion" id="exclusion">Exclusion</a></h4>
<p>Adversary B refuses to sign A and signs C instead</p>
<p><img src="./fig/meetup_3r_1i1d1a.svg" alt="" /></p>
<p>A variant of this would be that B isn't even present at the meetup</p>
<pre><code>reciprocity = 0.5 (1.0)
reciprocal edge connectedness = 1
</code></pre>
<p>Mitigation <strong>none</strong></p>
<ul>
<li>randomized meetups should reduce the chance that someone could be assigned with his sybil to the same meetup. In weakly populated areas, this can happen easily though. evil.corp could also increase chances.</li>
<li>Only allow meetups with more participants (&gt;=4?) in order to reduce the impact of a single participant on outcome.</li>
</ul>
<p><em>this scenario violates threat model assumptions</em></p>
<h2><a class="header" href="#4-registered-participants" id="4-registered-participants">4 Registered Participants</a></h2>
<h3><a class="header" href="#oversigning" id="oversigning">Oversigning</a></h3>
<p><img src="./fig/meetup_4r_1i2d1a.svg" alt="" /></p>
<p>Variant:</p>
<ul>
<li>B and C are not present at meetup, removing the reciprocal edges to A</li>
</ul>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 2
</code></pre>
<p>Mitigation: </p>
<ol>
<li>(NOK) Introduce <strong>Reputation</strong> (previous attendance to successful meetups)</li>
<li>(NOK) Introduce Rule <em>&quot;lowest vote with reputation wins&quot;</em>
* This rule, however, will cause B, C, and D to vote &quot;3&quot; showups and to refuse to sign A. Reputation doesn't help because B and C could have reputation as well.</li>
<li>(NEEDED?) quarantine non-consistent meetups</li>
</ol>
<p>At this meetup, 3/4 of registered participants are malicious.</p>
<p><em>this scenario violates threat model assumptions</em></p>
<h3><a class="header" href="#oversigning-light" id="oversigning-light">Oversigning light</a></h3>
<p><img src="./fig/meetup_4r_2i1d_1a.svg" alt="" /></p>
<pre><code>reciprocity = 1.0
reciprocal edge connectedness = 1
</code></pre>
<p>Mitigation</p>
<ul>
<li>only accept subgraph with recipr. edge connectedness of M-2 for M=4 here. This will cut off D.</li>
</ul>
<h3><a class="header" href="#location-spoofing" id="location-spoofing">Location Spoofing</a></h3>
<p><img src="./fig/meetup_4r_2i1d1a.svg" alt="" /></p>
<p>C and D could pretend to be at the meetup location. The ceremony validation has no way to know if A-B is legit or C-D.</p>
<p>Variants:</p>
<ul>
<li>D could be a real person colluding with C</li>
</ul>
<p>Probability:</p>
<ul>
<li>low because of randomization if number of meetups assigned is high
<ul>
<li>evil.corp could redistribute sybil id's after meeting assignments, undermining randomization</li>
</ul>
</li>
</ul>
<p>Mitigation: </p>
<ol>
<li>(NOK) track participant locations and require plausible movement trajectories before meetup. <strong>not sound</strong> because it is easy for C+D to spoof realistic trajectories</li>
<li>(NEEDED?) Quarantine: The validator can detect that the meetup is split and therefore not consistent. Issuance could be conditional to future ceremony attendance</li>
<li>(OK) The pair with higher reputation wins, the other doesn't get a reward issued.</li>
<li>(NOK) invalidate non-consistent meetups, preventing 2 illegit rewards while demoralizing 2 honest participants.</li>
</ol>
<p>At this meetup, 1/2 of registered participants are malicious.</p>
<h2><a class="header" href="#5-registered-participants" id="5-registered-participants">5 Registered Participants</a></h2>
<p><img src="./fig/meetup_5r_2i1d_2a.svg" alt="" /></p>
<p>Mitigation:</p>
<ul>
<li>Disqualify participant if vote != number of peers she signed</li>
</ul>
<p><img src="./fig/meetup_5r_2i_1d2a.svg" alt="" /></p>
<p>Mitigation:</p>
<ul>
<li><em>none</em>, if C,E,D all have reputation. the majority can always win. </li>
</ul>
<p><em>This violates threat model assumption 1</em></p>
<h1><a class="header" href="#conclusion" id="conclusion">Conclusion</a></h1>
<p>As long as the threat model assumptions are held, we can find a set of rules that prevents:</p>
<ul>
<li>issuing more rewards than there are honest participants (while there is no guarantee that every honest participant will get a reward in face of malicious behaviour)</li>
</ul>
<p>The probability that you as a participant experience a meetup with evil majority follows the poisson cumulative distribution function:</p>
<p>Given the overall proportion of malicious actors , the probability that you (being an honest actor) will suffer from malicious behaviour at one specific meetup depending on the number of participants in your meetup <em>n</em> is</p>
<p><a href="./fig/probability_of_malicious_majority.m">code</a>
<img src="./fig/probability_of_malicious_majority.svg" alt="" /></p>
<h1><a class="header" href="#decentralization" id="decentralization">Decentralization</a></h1>
<p>TODO</p>
<h2><a class="header" href="#blockchain" id="blockchain">Blockchain</a></h2>
<h2><a class="header" href="#security" id="security">Security</a></h2>
<h2><a class="header" href="#governance" id="governance">Governance</a></h2>
<h2><a class="header" href="#privacy" id="privacy">Privacy</a></h2>
<h1><a class="header" href="#testnets" id="testnets">Testnets</a></h1>
<p>Encointer maintains two testnets: Gesell and Cantillon.</p>
<p>The networks differ in their goals and designs:</p>
<h2><a class="header" href="#gesell" id="gesell">Gesell</a></h2>
<p>Aimed at automated testing of the protocol.</p>
<ul>
<li>Time-warping allows to script bot populations and hold ceremonies every 30min.</li>
<li>Complete transparency of all registries and balances. Everything happens on-chain.</li>
</ul>
<h2><a class="header" href="#cantillon" id="cantillon">Cantillon</a></h2>
<p>The main purpose of Cantillon is to test our mobile phone app and privacy features.
Aimed at experimenting with real ceremony meetups, physically meeting people.
Bot communities can still be grown but we expect them to be loctated in off-shore locations in order not to interfere with physical communities. </p>
<ul>
<li>Accelerated ceremony schedule to avoid long wait times. Ceremonies every three days.</li>
<li>Privacy enhancement through Trusted Execution environments (with enclaves still in development mode, so privacy is not guaranteed before we move to production mode)</li>
</ul>
<p>Cantillon is planned to become a parachain to <a href="https://kusama.network/">Kusama</a></p>
<p>Watch our <a href="https://youtu.be/X1Zb68Z1fac">demo video on bootstrapping a bot community</a></p>
<h2><a class="header" href="#outlook-on-mainnet" id="outlook-on-mainnet">Outlook on Mainnet</a></h2>
<p>The mainnet is planned to become a parachain of <a href="https://polkadot.network/">Polkadot</a>. The security will depend on polkadot relay chain. </p>
<h2><a class="header" href="#time-warping-for-testnets" id="time-warping-for-testnets">Time Warping for Testnets</a></h2>
<p>In order to understand the different timing on our networks, we offer the following figure:</p>
<p><img src="./fig/phase-timing.svg" alt="Phase Timing" /></p>
<h2><a class="header" href="#testing-cantillons-teeproxy-system-locally" id="testing-cantillons-teeproxy-system-locally">Testing Cantillon's Teeproxy System Locally</a></h2>
<p>You can run an entire Demo locally on any properly set up SGX machine. This is for advanced users or developers. The instructions assume that you are able to build substrate blockchains.</p>
<p>Build client and worker along the <a href="https://www.substratee.com/howto_worker.html">substraTEE-worker instructions</a>. With the following differences:</p>
<pre><code class="language-console">git clone https://github.com/encointer/encointer-worker.git
cd encointer-worker
./ci/install-rust.sh
make
</code></pre>
<p>Build node along the <a href="https://www.substratee.com/howto_node.html#build">substraTEE-node instructions</a>. With the following differences:</p>
<pre><code class="language-console">git clone https://github.com/encointer/encointer-node.git
cd encointer-node
git checkout sgx-master
cargo build --release
</code></pre>
<p>Run dev node locally</p>
<pre><code class="language-console">..encointer-node# ./target/release/encointer-node-teeproxy --dev --ws-port 9979
</code></pre>
<p>Run dev worker with a few insightful logs locally</p>
<pre><code class="language-bash">cd encointer-worker/bin
./encointer-worker init-shard
./encointer-worker shielding-key
./encointer-worker signing-key
export RUST_LOG=info,substrate_api_client=warn,sp_io=warn,ws=warn,encointer_worker=info,substratee_worker_enclave=debug,sp_io::misc=debug
./encointer-worker -p 9979 run
</code></pre>
<h1><a class="header" href="#testnet-gesell" id="testnet-gesell">Testnet Gesell</a></h1>
<p>Gesell is our first testnet. It allows you to bootstrap new local currencies and perform regular proof-of-personhood ceremonies that give participants a universal basic income. This network is meant for testing with bot populations in order to audit and stress-test the protocol. Gesell does not give you the privacy that later networks will provide. We do not expect real physical meetups to happen on this network except occasional demo meetups. </p>
<h2><a class="header" href="#design" id="design">Design</a></h2>
<p>Gesell is based on <a href="https://substrate.dev/">substrate</a> and its nodes consist of four <em>pallets</em></p>
<p><img src="./fig/Testnet-Gesell-Component-Interactions.svg" alt="Gesell" /></p>
<h3><a class="header" href="#scheduler" id="scheduler">Scheduler</a></h3>
<p>Keeps track of time and maintains the ceremony state-machine phase changes.</p>
<h3><a class="header" href="#currencies" id="currencies">Currencies</a></h3>
<p>Registry for all local currencies with their properties and meetup locations</p>
<h3><a class="header" href="#balances" id="balances">Balances</a></h3>
<p>The individual's account balances in all currencies, featuring <a href="./economics-demurrage.html">demurrage</a>.</p>
<h3><a class="header" href="#ceremonies" id="ceremonies">Ceremonies</a></h3>
<p>Where participants register for ceremonies. Assignment of meetups and issuance of UBI upon proof-of-personhood.</p>
<h1><a class="header" href="#testnet-gesell-tutorial" id="testnet-gesell-tutorial">Testnet Gesell Tutorial</a></h1>
<h2><a class="header" href="#connect" id="connect">Connect!</a></h2>
<p>You may watch Gesell working by navigating to <a href="https://polkadot.js.org/apps">polkadot.js.org/apps</a>. Then you connect to our node by setting our custom endpoint at Settings -&gt; General</p>
<p><img src="./fig/polkadot-js-apps-custom-endpoint.png" alt="connect polkadot.js.org/apps to custom endpoint" /></p>
<p>Hit &quot;save&quot; and you should see something like this in the upper left corner</p>
<p><img src="./fig/polkadot-js-apps-status.png" alt="polkadot.js.org/apps status" /></p>
<p>There we go!</p>
<p>If you're interested in node statistics, please refer to  <a href="https://telemetry.polkadot.io/#list/Encointer%20Testnet%20Gesell">telemetry.polkadot.io</a></p>
<h2><a class="header" href="#explore" id="explore">Explore!</a></h2>
<p>Gesell features regular ceremonies every 30min (Whereas the vision for mainnet is every 41 days). You can query the current ceremony phase below Chain State </p>
<p><img src="./fig/polkadot-js-apps-query-phase.png" alt="query phase" /></p>
<p>Registering means that participants can now register for the next ceremony</p>
<h2><a class="header" href="#play" id="play">Play!</a></h2>
<p>But now you'd like to play with it, right? So get our cli client and start playing! The following instructions start from prebuilt binaries for ubuntu 18.04. If you use some other OS, you will have to build the client yourself.</p>
<pre><code class="language-bash">&gt; mkdir test
&gt; cd test
&gt; wget https://github.com/encointer/encointer-node/releases/download/v0.2.0/encointer-client
&gt; chmod u+x encointer-client
&gt; ./encointer-client wss://gesell.encointer.org get-phase
# you should see either of REGISTERING, ASSIGNING or ATTESTING
# for simplicity, we'll create an alias for the client
&gt; alias nctr=&quot;./encointer-client wss://gesell.encointer.org&quot;
# let's create a new account
&gt; nctr new-account
5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
# you can now check that your local keystore has a new entry
&gt; ls my_keystore
73723235ae365cf166bab30448f25b3751b06d034be9c992a8ba5501d3adcde640ab9b1e
&gt; nctr get-balance 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
ERT balance for 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex 0
</code></pre>
<p>As with other blockchains, you'll need some funds in order to pay fees. As you can read in our whitepaper, we'll avoid this entry barrier in the future. We have a faucet in place that gets you started immediately:</p>
<pre><code class="language-bash">&gt; nctr fund-account 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
</code></pre>
<p>Should the faucet be exhausted, please post a message to our riot channel and friendly request some topup. Please be patient. </p>
<pre><code class="language-bash">&gt; nctr get-balance 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
ERT balance for 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex is 998999854
# now you could send around your new ERT
&gt; nctr transfer 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex 5G18LaJA315RwJqtYYbWrbE52g9FEQCgBYN1A1XG66XnKAw5 123456789
</code></pre>
<h2><a class="header" href="#bootstrap-your-own-currency" id="bootstrap-your-own-currency">Bootstrap your own currency</a></h2>
<p>Now that we have some funds to pay platform fees, we can start our own local currency and bootstrap a bot population! 
Define Meetup Locations</p>
<p>First of all, we need to define in what region the currency shall be issued. For this we use the geojson standard to define a set of meetup places and add some meta-information about the currency. You can use geojson.io to select meetup places on a map (define a few &quot;Points&quot;). Make sure that you select places that are &gt;100m apart. You also need to keep this minimal distance from other registered currencies. You can list all registered currencies with</p>
<pre><code class="language-bash">&gt; nctr list-currencies
</code></pre>
<p>Our <a href="https://explorer.encointer.org">explorer</a> allows you to browse all regsitered currencies and their attributes on a map.</p>
<p>The number of locations that you should define depends on the size of the population N you'd like to bootstrap. As a rule of thumb, there should be at least N locations in order to guarantee reasonable randomization. As a maximum of 12 people can attend the same meetup the hard lower limit is N/12. </p>
<h2><a class="header" href="#trusted-setup" id="trusted-setup">Trusted Setup</a></h2>
<p>Every local currency needs a trusted setup. A trustworthy group of 3-12 local people will hold the bootstrapping ceremony publicly. These bootstrappers need to be defined in the metadata block:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;currency_meta&quot;: {
    &quot;name&quot;: &quot;minimal mediterranean test currency&quot;,
    &quot;bootstrappers&quot;: [
      &quot;5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex&quot;,
      &quot;5Dy4K5eNr13D37NcMcq4ffQZBAmt9BZhkgi5kBGuUWwK8cB7&quot;,
      &quot;5GCdWmdr5eZRvRPx6XE8YxFD472EvSMSTK6GQCHyuiNnw7rK&quot;
    ]
  },
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;properties&quot;: {},
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Point&quot;,
        &quot;coordinates&quot;: [
          11.25,
          40.03182061333687
        ]
      }
    }
  ]
}
</code></pre>
<p>As one of the bootstrappers, you can now save the above to minimal.json and register your new currency:</p>
<pre><code class="language-bash">&gt; nctr new-currency minimal.json 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
</code></pre>
<p>Your currency has been registered and the return value is your currency-identifier (cid). Let's check the registry again:</p>
<pre><code class="language-bash">&gt; nctr list-currencies
number of currencies:  1
currency with cid HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
</code></pre>
<p>In order to bootstrap your bot currency, You'll need to fund all bootstrappers and register all of them</p>
<pre><code class="language-bash">#check if phase is REGISTERING
&gt; nctr get-phase
REGISTERING
# ok, let's register, but first we will define a few variables and a new alias
&gt; alias nctr=&quot;./encointer-client wss://gesell.encointer.org --cid HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES&quot;
&gt; account1=5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
&gt; account2=5Dy4K5eNr13D37NcMcq4ffQZBAmt9BZhkgi5kBGuUWwK8cB7
&gt; account3=5GCdWmdr5eZRvRPx6XE8YxFD472EvSMSTK6GQCHyuiNnw7rK
&gt; nctr register-participant $account1
&gt; nctr register-participant $account2
&gt; nctr register-participant $account3
# if everything goes well, you should find your registrations here:
&gt; nctr list-participant-registry
listing participants for cid HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES and ceremony nr 38
number of participants assigned:  3
ParticipantRegistry[38, 1] = 7080e1799d2e646d8b3f9e7eab53b2f011476d6fd4abe3ac69aa039bf3f11440 (5EcDWHsG...)
ParticipantRegistry[38, 2] = b6fc46e65b3b24af03845fa12917668863db7b5bd46d6125643170400ca25c41 (5GCdWmdr...)
ParticipantRegistry[38, 3] = 5429da7a940f960b9a79cb1b7889142b8ee209b7f43ac5953df9c56f1bc0a726 (5Dy4K5eN...)
</code></pre>
<p>Now you'll have to wait ~10min until the ceremony phase turns to ASSIGNING. The blockchain then assigns all participants to randomized groups that will have to meet at a random meetup location at a specific time. Participants can learn their assignment with:</p>
<pre><code class="language-bash">&gt; nctr list-meetup-registry
listing meetups for cid HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES and ceremony nr 38
number of meetups assigned:  1
MeetupRegistry[38, 1] location is Some(Location { lat: 40.0318206134, lon: 11.25 })
MeetupRegistry[38, 1] meeting time is Some(1586541900000)
MeetupRegistry[38, 1] participants are:
   7080e1799d2e646d8b3f9e7eab53b2f011476d6fd4abe3ac69aa039bf3f11440 (5EcDWHsG...)
   b6fc46e65b3b24af03845fa12917668863db7b5bd46d6125643170400ca25c41 (5GCdWmdr...)
   5429da7a940f960b9a79cb1b7889142b8ee209b7f43ac5953df9c56f1bc0a726 (5Dy4K5eN...)
</code></pre>
<p>The ceremony phase will change to ATTESTING before the date of the ceremony. </p>
<p>An encointer ceremony happens at high sun on the same day all over the world. This way, no single person can attend more than one meetup. At each meetup, participants attest each others personhood. For this testnet, however, we don't care about real time or physical presence as we're testing with bot communities. See <a href="./testnets.html#time-warping-for-testnets">Time Warping</a> to learn how the timing maps between mainnet and Gesell.</p>
<p>Our bot communities can perform meetups simply with the following lines. In later networks, a mobile app will be used (similar to what we demonstrated in PoC1).</p>
<pre><code class="language-bash"># each participant generates a claim of attendance including her vote on how many people N are actually physically present at that moment
&gt; claim1=$(nctr new-claim $account1 3)
&gt; claim2=$(nctr new-claim $account2 3)
&gt; claim3=$(nctr new-claim $account3 3)
# this claim is then sent to all other participants who will verify them and sign an attestation 
&gt; witness1_2=$(nctr sign-claim $account1 $claim2)
&gt; witness1_3=$(nctr sign-claim $account1 $claim3)
&gt; witness2_1=$(nctr sign-claim $account2 $claim1)
&gt; witness2_3=$(nctr sign-claim $account2 $claim3)
&gt; witness3_1=$(nctr sign-claim $account3 $claim1)
&gt; witness3_2=$(nctr sign-claim $account3 $claim2)
# and send that attestation back to the claimant who assembles all attestations and sends them to the chain
&gt; nctr register-attestations $account1 $witness2_1 $witness3_1
&gt; nctr register-attestations $account2 $witness1_2 $witness3_2
&gt; nctr register-attestations $account3 $witness1_3 $witness2_3
</code></pre>
<p>Now you have to wait for the ceremony phase to become REGISTERING. Then we can verify that our bootstrapping was successful and our bootstrappers have received their basic income issue on their accounts in units of the new currency (beware that we still use the alais including our cid. This means we're not querying ERT token balance, but the balnce in your new local currency). </p>
<pre><code class="language-bash">&gt; nctr get-balance $account1
NCTR balance for 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex is 0.99999932394375560185 in currency HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
</code></pre>
<p>Your new currency has a very special property called <a href="./eceonomy-demurrage.html">demurrage</a>. This means that the nominal value of your holdings decreases over time. Currently it is halving every year. You can observe this by waiting for a few blocks and checking your balance again. Think of this demurrage like a solidarity fee that you pay to the decentralized &quot;state&quot; that takes care of redistributing wealth among the local population at every ceremony as newly issued basic income.</p>
<h2><a class="header" href="#whats-next" id="whats-next">What's next?</a></h2>
<p>Now that you bootstrapped your community currency, you should grow your population. At every subsequent ceremony you can add a few participants more but it is important to maintain reputation. At least 3/4 of all participants need to have attended the previous ceremony. So you can only grow your population at a pace that allows to build reputation.</p>
<h1><a class="header" href="#testnet-cantillon" id="testnet-cantillon">Testnet Cantillon</a></h1>
<h2><a class="header" href="#design-1" id="design-1">Design</a></h2>
<p>Cantillon uses the same pallets as Gesell, but the privacy-sensitive ones will be executed off-chain, inside a trusted execution environment (TEE). <a href="https://github.com/scs/substraTEE">SubstraTEE</a> will be the framework that isolates sensitive information inside Intel SGX enclaves (Alternative TEE technologies are being evaluated)</p>
<p><img src="./fig/Testnet-Cantillon-Component-Interactions.svg" alt="Cantillon" /></p>
<h1><a class="header" href="#testnet-gesell-tutorial-1" id="testnet-gesell-tutorial-1">Testnet Gesell Tutorial</a></h1>
<h2><a class="header" href="#connect-1" id="connect-1">Connect!</a></h2>
<p>You may watch Cantillon working by navigating to <a href="https://polkadot.js.org/apps">polkadot.js.org/apps</a>. Then you connect to our node by setting our custom endpoint at Settings -&gt; General
Set the endpoint to <code>wss://cantillon.encointer.org</code></p>
<p>Hit &quot;save&quot; and you should see the explorer loading for Cantillon.</p>
<p>If you're interested in node statistics, please refer to  <a href="https://telemetry.polkadot.io/#list/Encointer%20Testnet%20Cantillon">telemetry.polkadot.io</a></p>
<p>Cantillon features regular ceremonies every 3 days (Whereas the vision for mainnet is every 41 days).
You can either gather a few people and hold an actual meetup or you register a bot currency with virtual people like we will do in this tutorial.</p>
<h2><a class="header" href="#client-setup" id="client-setup">Client Setup</a></h2>
<p>Get our cli client and start playing! The following instructions start from prebuilt binaries for ubuntu 18.04. If you use some other OS, you will have to <a href="./testnets.html">build the client yourself</a>.</p>
<pre><code class="language-console">mkdir test
cd test
wget https://github.com/encointer/encointer-worker/releases/download/v0.6.10-sub2.0.0-alpha.7/encointer-client-teeproxy-0.6.10
chmod u+x encointer-client-teeproxy-0.6.10
ln -s encointer-client-teeproxy-0.6.10 encointer-client
./encointer-client -u wss://cantillon.encointer.org -p 443 get-phase
</code></pre>
<p>You should see either of REGISTERING, ASSIGNING or ATTESTING</p>
<p>for simplicity, we'll create an alias for the client</p>
<pre><code class="language-console"># Cantillon node endpoint
NURL=wss://cantillon.encointer.org
NPORT=443
# Cantillon worker endpoint
WURL=wss://substratee03.scs.ch
WPORT=443
alias nctr=&quot;./encointer-client -u $NURL -p $NPORT -U $WURL -P $WPORT&quot;
</code></pre>
<p>Encointer Cantillon uses <em>workers</em> to confidentially process your calls inside TEEs. In order to use Encointer currencies, you will be interacting with <em>workers</em>. You can list all available workers as follows: </p>
<pre><code class="language-bash">&gt; nctr list-workers
number of workers registered: 2
Enclave 1
   AccountId: 5DBXHQgjd6CVuzHnoyXVW8WatuDi2rfhH57yDwVZ3ZzMgYiX
   MRENCLAVE: 5RqYVKwQdyvPqAPwauWz9oQMRcU9dw9M1vKfPWx81bgh
   RA timestamp: 2020-06-10 11:42:53 UTC
   URL: 127.0.0.1:2000
Enclave 2
   AccountId: 5Eztpox9YRidTCReasMep5m7x3vvXSFpmbjfHhihw7QqNyZY
   MRENCLAVE: CCJdb3mKPnape3Q3mkHWVaXgSfDRz5JahQMkCB7xH6rV
   RA timestamp: 2020-07-22 07:06:56 UTC
   URL: 127.0.0.1:19944
</code></pre>
<p>We see two enclaves and we have to know what is the most recent Encointer enclave version as identified by MRENCLAVE. In this case, Enclave 1 is outdated, so we chose the second one:</p>
<pre><code class="language-bash">MRENCLAVE=CCJdb3mKPnape3Q3mkHWVaXgSfDRz5JahQMkCB7xH6rV
</code></pre>
<p>Now we'll connect to a worker and request some publicly available information on an existing currency (aggregated values from its confidential state)</p>
<pre><code class="language-bash">cid=7eLSZLSMShw4ju9GvuMmoVgeZxZimtvsGTSvLEdvcRqQ
nctr trusted info -m $MRENCLAVE --shard $cid
</code></pre>
<p>The query may be slow but you should see something like:</p>
<pre><code class="language-console">Public information about currency 7eLSZLSMShw4ju9GvuMmoVgeZxZimtvsGTSvLEdvcRqQ
  total issuance: 19.6336295455992388671
  participant count: 0
  meetup count: 0
  ceremony reward: 1
  location tolerance: 1000m
  time tolerance: 600000m
</code></pre>
<p>If you get such a response that means that you are successfully talking to our worker. Don't worry about the contents too much for now.</p>
<h2><a class="header" href="#create-accounts" id="create-accounts">Create Accounts</a></h2>
<p>Now we'll create three <em>incognito</em> accounts for three virtual people that we will use for the remainder of the tutorial. In a real setting, every user will at least need one <em>public</em> and one <em>incognito</em> account but we'll use the same <em>public</em> account for all users for simplicity.</p>
<pre><code class="language-bash">nctr trusted new-account -m $MRENCLAVE
nctr trusted new-account -m $MRENCLAVE
nctr trusted new-account -m $MRENCLAVE
</code></pre>
<p>This will create three accounts, in our case being these:</p>
<pre><code class="language-console">5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
5Dy4K5eNr13D37NcMcq4ffQZBAmt9BZhkgi5kBGuUWwK8cB7
5GCdWmdr5eZRvRPx6XE8YxFD472EvSMSTK6GQCHyuiNnw7rK
</code></pre>
<p>You can observe that a new keystore has been created in your working directory below <code>my_trusted_keystore</code>. </p>
<p><em>Incognito</em> keys do not need to be pre-funded as the Encointer STF does not charge fees. The underlying blockchain in fact does charge fees but for simplicity, our testnet client delegates all fee payments to Alice (with a well-known and hard-coded private key), who is very friendly and pays the fees for everyone. The Encointer Association will ensure that Alice doesn't run out of funds.</p>
<p>The CLI uses the keyword <em>trusted</em> for all calls involving <em>incognito</em> accounts. Under the hood this means that you're acutually interacting with a worker TEE. The blockchain is merely a proxy in this case, forwarding your request to the worker enclave. See <a href="https://www.substratee.com/design.html#indirect-invocation-current-implementation">indirect invocation</a> for in-depth documentation.</p>
<h2><a class="header" href="#bootstrap-your-own-currency-1" id="bootstrap-your-own-currency-1">Bootstrap your own currency</a></h2>
<p>Now we can start our own local currency and bootstrap a bot population with our three users! </p>
<h3><a class="header" href="#define-meetup-locations" id="define-meetup-locations">Define Meetup Locations</a></h3>
<p>First of all, we need to define in what region the currency shall be issued. For this we use the geojson standard to define a set of meetup places and add some meta-information about the currency. You can use <a href="http://geojson.io">geojson.io</a> to select meetup places on a map (define one or a few &quot;Points&quot;). Make sure that you select places that are &gt;100m apart. You also need to keep this minimal distance from other registered currencies. You can list all registered currencies with</p>
<pre><code class="language-bash">&gt; nctr list-currencies
</code></pre>
<p>The number of locations that you should define depends on the size of the population N you'd like to bootstrap. As a rule of thumb, there should be at least N locations in order to guarantee reasonable randomization. As a maximum of 12 people can attend the same meetup the hard lower limit is N/12.</p>
<h3><a class="header" href="#trusted-setup-1" id="trusted-setup-1">Trusted Setup</a></h3>
<p>Every local currency needs a trusted setup.
A trustworthy group of 3-12 local people will hold the bootstrapping ceremony publicly.
These bootstrappers need to be defined in the metadata block.
For improved privacy, we will use our incognito accounts for this that will never be used on-chain.</p>
<p>Now we create our currency specification:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;FeatureCollection&quot;,
  &quot;currency_meta&quot;: {
    &quot;name&quot;: &quot;my minimal test currency&quot;,
    &quot;bootstrappers&quot;: [
      &quot;5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex&quot;,
      &quot;5Dy4K5eNr13D37NcMcq4ffQZBAmt9BZhkgi5kBGuUWwK8cB7&quot;,
      &quot;5GCdWmdr5eZRvRPx6XE8YxFD472EvSMSTK6GQCHyuiNnw7rK&quot;
    ]
  },
  &quot;features&quot;: [
    {
      &quot;type&quot;: &quot;Feature&quot;,
      &quot;properties&quot;: {},
      &quot;geometry&quot;: {
        &quot;type&quot;: &quot;Point&quot;,
        &quot;coordinates&quot;: [
          11.25,
          40.03182061333687
        ]
      }
    }
  ]
}
</code></pre>
<p>Replace bootstrappers with your newly created accounts and replace the Point with your location of choice. Then save the above to minimal.json and register your new currency. Currencies are registered in public on-chain, so we'll ask Alice to pay for the fees.</p>
<pre><code class="language-bash">nctr new-currency minimal.json //Alice
</code></pre>
<p>Your currency has been registered on-chain and the return value is your currency-identifier (cid). Store the cid to an env variable:</p>
<pre><code class="language-console">cid=HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
</code></pre>
<p>Let's check the registry again:</p>
<pre><code class="language-bash">&gt; nctr list-currencies
number of currencies:  1
currency with cid HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
</code></pre>
<p>Cantillon features <a href="https://www.substratee.com/sharding.html">sharding</a> and every new currency will have its own shard. The CLI client allows you to use different accounts on different shards. For this tutorial we'd like to use exactly the same accounts that we just created for the default shard (identified by the mrenclave). So we need to link our sharded keystore to the default shard:</p>
<pre><code class="language-console">cd my_trusted_keystore
ln -sd CCJdb3mKPnape3Q3mkHWVaXgSfDRz5JahQMkCB7xH6rV HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
cd ..
</code></pre>
<p>Now we will be able to use our keys for the new currency.</p>
<p>In order to bootstrap your bot currency, You'll need to register all of them for the next ceremony during the 16h registering phase. You can only start this procedure every 3 days!</p>
<pre><code class="language-bash">#check if phase is REGISTERING
&gt; nctr get-phase
REGISTERING
# ok, let's register, but first we will define a few variables and a new alias
&gt; account1=5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
&gt; account2=5Dy4K5eNr13D37NcMcq4ffQZBAmt9BZhkgi5kBGuUWwK8cB7
&gt; account3=5GCdWmdr5eZRvRPx6XE8YxFD472EvSMSTK6GQCHyuiNnw7rK
&gt; nctr trusted register-participant $account1 --mrenclave $MRENCLAVE --shard $cid
&gt; nctr trusted register-participant $account2 --mrenclave $MRENCLAVE --shard $cid
&gt; nctr trusted register-participant $account3 --mrenclave $MRENCLAVE --shard $cid
# if everything goes well, you should be able to get your registration index &gt;0:
&gt; nctr trusted get-registration $account1 --mrenclave $MRENCLAVE --shard $cid
send TrustedGetter::get_registration for 5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex
Participant index: 1
</code></pre>
<p>The current client throws an irrelevant error about decoding events. Just ignore that!</p>
<p>Now's a good time to check what public information is available about our currency at this time:</p>
<pre><code class="language-console">&gt; nctr trusted info -m $MRENCLAVE --shard $cid
Public information about currency HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
  total issuance: 0
  participant count: undisclosed (might be REGISTERING phase?)
  meetup count: 0
  ceremony reward: 1
  location tolerance: 1000m
  time tolerance: 600000m
</code></pre>
<p>So, right now, there is nothing to see. Let's move on!</p>
<p>You'll have to wait until the ceremony phase turns to ASSIGNING. The worker enclave then assigns all participants to randomized groups that will have to meet at a random meetup locations at the upcoming ceremony.
During the ASSIGNING phase you can learn where and when exactly you will have to be for your meetup and how many people you're goint to meet. The CLI however, doesn't support that query. The mobile phone app will. There is publicly available information though:</p>
<pre><code class="language-console">&gt; nctr trusted info -m $MRENCLAVE --shard $cid
Public information about currency HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
  total issuance: 0
  participant count: 3
  meetup count: 1
  ceremony reward: 1
  location tolerance: 1000m
  time tolerance: 600000m
</code></pre>
<p>You can see your three participants have been assigned to one meetup. No money has ever been issued for this currency.Perfect.</p>
<p>The ceremony phase will change to ATTESTING on the date of the ceremony. The time of the ceremony will be high sun in your location. This way, no single person can attend more than one meetup. At each meetup, participants attest each others personhood. However, for a bot community this doesn't matter as they can jointly pretend to have met at the right time. (That's one of the reasons why we need a trusted <em>human</em> setup in the first place)</p>
<p>See <a href="./testnets.html#time-warping-for-testnets">Time Warping</a> to learn how the timing maps between mainnet and Cantillon.</p>
<p>Our bot communities can perform meetups simply with the following lines. In our next tutorial, we will explain how to perform real physical meetups with our mobile phone app.</p>
<pre><code class="language-bash"># each participant generates a claim of attendance including her vote on how many people N are actually physically present at that moment
claim1=$(nctr trusted new-claim $account1 3 --mrenclave $MRENCLAVE --shard $cid )
claim2=$(nctr trusted new-claim $account2 3 --mrenclave $MRENCLAVE --shard $cid )
claim3=$(nctr trusted new-claim $account3 3 --mrenclave $MRENCLAVE --shard $cid )
# this claim is then sent to all other participants who will verify them and sign an attestation
witness1_2=$(nctr trusted sign-claim $account1 $claim2 --mrenclave $MRENCLAVE --shard $cid)
witness1_3=$(nctr trusted sign-claim $account1 $claim3 --mrenclave $MRENCLAVE --shard $cid)
witness2_1=$(nctr trusted sign-claim $account2 $claim1 --mrenclave $MRENCLAVE --shard $cid)
witness2_3=$(nctr trusted sign-claim $account2 $claim3 --mrenclave $MRENCLAVE --shard $cid)
witness3_1=$(nctr trusted sign-claim $account3 $claim1 --mrenclave $MRENCLAVE --shard $cid)
witness3_2=$(nctr trusted sign-claim $account3 $claim2 --mrenclave $MRENCLAVE --shard $cid)
# and send that attestation back to the claimant who assembles all attestations and sends them to the chain
nctr trusted register-attestations $account1 $witness2_1 $witness3_1 --mrenclave $MRENCLAVE --shard $cid
nctr trusted register-attestations $account2 $witness1_2 $witness3_2 --mrenclave $MRENCLAVE --shard $cid
nctr trusted register-attestations $account3 $witness1_3 $witness2_3 --mrenclave $MRENCLAVE --shard $cid
# each participant can verify that her own attestations have been registered
nctr trusted get-attestations $account1 --mrenclave $MRENCLAVE --shard $cid
nctr trusted get-attestations $account2 --mrenclave $MRENCLAVE --shard $cid
nctr trusted get-attestations $account3 --mrenclave $MRENCLAVE --shard $cid
</code></pre>
<p>Now you have to wait for the ceremony phase to become REGISTERING.
Then we can verify that our bootstrapping was successful and our bootstrappers
have received their basic income issue on their accounts in units of the new currency</p>
<pre><code class="language-bash">&gt; nctr trusted balance $account1 --mrenclave $MRENCLAVE --shard $cid
arg_who = &quot;5EcDWHsGzERpiP3ZBoFfceHpinBeifq5Lh1VnCkzxca9f9ex&quot;
0.9999990985917757029
</code></pre>
<p>And the public information about our currency becomes:</p>
<pre><code class="language-console">&gt; nctr trusted info -m $MRENCLAVE --shard $cid
Public information about currency HKKAHQhLbLy8b84u1UjnHX9Pqk4FXebzKgtqSt8EKsES
  total issuance: 2.9999932394428882902
  participant count: undisclosed (might be REGISTERING phase?)
  meetup count: 0
  ceremony reward: 1
  location tolerance: 1000m
  time tolerance: 600000m
</code></pre>
<p>Your new currency has a very special property called <a href="./economics-demurrage.html">demurrage</a>.
This means that the nominal value of your holdings decreases over time.
Currently it is halving every year.
You can observe this by waiting for a few blocks and checking your balance again.
Think of this demurrage like a solidarity fee that you pay to the decentralized &quot;state&quot;
that takes care of redistributing wealth among the local population at every ceremony
as newly issued basic income.</p>
<h2><a class="header" href="#whats-next-1" id="whats-next-1">What's next</a></h2>
<p>Now that you bootstrapped your community currency, you should grow your population. At every subsequent ceremony you can add a few participants more but it is important to maintain reputation. At least 3/4 of all participants need to have attended the previous ceremony. So you can only grow your population at a pace that allows to build reputation.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
